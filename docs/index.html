<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8" /><title>Anders Murphy</title><meta content="
base-uri    &apos;self&apos;;
form-action &apos;self&apos;;
default-src &apos;none&apos;;
script-src  &apos;self&apos;;
img-src     &apos;self&apos;;
font-src    &apos;self&apos;;
connect-src &apos;self&apos;;
style-src   &apos;self&apos;
" http-equiv="Content-Security-Policy" /><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><link href="https://andersmurphy.com/styles.css" rel="stylesheet" type="text/css" /><link href="https://andersmurphy.com/assets/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" /><link href="https://andersmurphy.com/assets/favicon.ico" rel="shortcut icon" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="A blog mostly about software development." name="description" /></head><body><div class="sidebar"><div class="container sidebar-sticky"><div class="sidebar-about"><img alt="portrait" class="portrait" height="120" src="https://andersmurphy.com/assets/anderspixel.png" width="60" /><h1><a href="https://andersmurphy.com/">Anders Murphy</a></h1><p class="lead">A blog mostly about functional programming</p></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="https://github.com/andersmurphy">Github</a><a class="sidebar-nav-item" href="https://twitter.com/anders_murphy">Twitter</a><a class="sidebar-nav-item" href="https://uk.linkedin.com/in/anders-murphy-76457b3a">LinkedIn</a><a class="sidebar-nav-item" href="https://andersmurphy.com/feed.xml">RSS</a></nav></div></div><div class="content container"><div class="posts"><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2023/09/16/clojure-virtual-threads-with-ring-and-jetty.html">Clojure: virtual threads with ring and jetty</a></h1><time class="post-date" datetime="2023-09-16T00:00:00+00:00">16 Sep 2023</time><p><a href='https://openjdk.org/jeps/425'>Java 19 introduce virtual threads</a> as a preview feature. Virtual threads are lightweight threads that allow you to write server applications in a simple thread-per-request style (as opposed to async style) and still scale with near-optimal hardware utilisation. The thread-per-request approach is generally easier to reason about, maintain and debug than it's asynchronous counterparts. In this post we'll cover configuring <a href='https://github.com/ring-clojure/ring/tree/master/ring-jetty-adapter'>Jetty</a> to make your ring handlers use virtual threads and benchmark it against regular threads.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2023/09/15/clojure-virtual-threads-with-ring-and-http-kit.html">Clojure: virtual threads with ring and http-kit</a></h1><time class="post-date" datetime="2023-09-15T00:00:00+00:00">15 Sep 2023</time><p><a href='https://openjdk.org/jeps/425'>Java 19 introduce virtual threads</a> as a preview feature. Virtual threads are lightweight threads that allow you to write server applications in a simple thread-per-request style (as opposed to async style) and still scale with near-optimal hardware utilisation. The thread-per-request approach is generally easier to reason about, maintain and debug than it's asynchronous counterparts. In this post we'll cover configuring <a href='https://github.com/http-kit/http-kit'>http-kit</a> to make your ring handlers use virtual threads and benchmark it against regular threads.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2023/09/08/fennel-making-pico-8-games.html">Fennel: making PICO-8 games</a></h1><time class="post-date" datetime="2023-09-08T00:00:00+00:00">08 Sep 2023</time><p>I recently wrote <a href='https://andersmurphy.itch.io/staglight'>a game jam game</a> for <a href='https://www.lexaloffle.com/pico-8.php'>PICO-8</a> using <a href='https://fennel-lang.org'>Fennel</a>. This post goes over setting up a project to write PICO-8 games in Fennel.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2023/07/16/clojure-sqlite-application-defined-sql-functions-with-jdbc.html">Clojure: SQLite application defined SQL functions with JDBC</a></h1><time class="post-date" datetime="2023-07-16T00:00:00+00:00">16 Jul 2023</time><p>SQLite provides a convenient interface called <a href='https://www.sqlite.org/appfunc.html'>Application-Defined SQL Functions</a> that lets you create custom SQL functions that call back into your application code to compute their results. This lets us  extend SQLite in Clojure. Want to query with regex or jsonpath? Want custom aggregation functions? Don't want to write C? Don't want to manage different precompiled binaries for different operating systems. No problem Application Defined SQL Functions have you covered. </p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2023/07/09/sqlite-building-from-source-on-macos.html">SQLite: building from source on macOS</a></h1><time class="post-date" datetime="2023-07-09T00:00:00+00:00">09 Jul 2023</time><p>I've been playing around with <a href='https://openjdk.org/projects/panama/'>Project Panama</a> to explore building a simpler and lighter SQLite driver to use from Clojure. This required downloading and compiling SQlite from source for macOS/OS X.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2022/06/14/clojure-sending-emails-with-postal-and-gmail-smtp.html">Clojure: sending emails with postal and Gmail SMTP</a></h1><time class="post-date" datetime="2022-06-14T00:00:00+00:00">14 Jun 2022</time><p>While services like <a href='https://sendgrid.com'>SendGrid</a> are easy to use and offer a plethora of features like bounce and open rate monitoring, they are not the cheapest option. Gmail's SMTP service on the other hand, although not as feature rich, is more affordable. In this post we will cover setting up Gmail SMTP with <a href='https://github.com/drewr/postal'>postal</a>.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2022/05/22/clojure-pretty-print-strings.html">Clojure: pretty print strings</a></h1><time class="post-date" datetime="2022-05-22T00:00:00+00:00">22 May 2022</time><p><code>clojure.pprint/pprint</code> can be used to print Clojure data structures in a pleasing, easy-to-understand format. However, sometimes you are not printing directly to <code>&#42;out&#42;</code>, for example when using third party logging libraries/services. Thankfully, we can also use <code>clojure.pprint/pprint</code> generate a pretty string by wrapping it in <code>with-out-str</code>.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2022/05/02/clojure-extend-honeysql-to-support-postgres-alter-column-and-add-constraint.html">Clojure: extend honeysql to support postgres 'alter column' and 'add constraint'</a></h1><time class="post-date" datetime="2022-05-02T00:00:00+00:00">02 May 2022</time><p><a href='https://github.com/seancorfield/honeysql'>Honeysql</a> is an amazing library that lets you write SQL using clojure data structures. This makes SQL much more composable as you no longer need to smash strings together. That being said, when using it with <a href='https://www.postgresql.org/'>postgresql</a> there are some features that don't work out of the box. Thankfully, honeysql is very easy to extend. This post will show you how to add support for <code>alter column</code> and  <code>add constraint</code>.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2022/03/27/clojure-removing-namespace-from-keywords-in-response-middleware.html">Clojure: removing namespace from keywords in response middleware</a></h1><time class="post-date" datetime="2022-03-27T00:00:00+00:00">27 Mar 2022</time><p>Namespaced keywords let you add a namespace to a keyword <code>:id</code> -> <code>:user/id</code>, this is a really nice feature that prevents collisions when merging two maps. For example merging  <code>{:account/id &quot;foo&quot;}</code> with  <code>{:user/id &quot;bar&quot;}&#41;</code> would give you <code>{:account/id &quot;foo&quot; :user/id &quot;bar&quot;}</code>. This lets you avoid unnecessary data nesting and keep your data flat. However, by the time this data gets to the edge of your system, where it meets something that expects json, you will often want to remove these namespaces. This post shows you how to write a middleware that automates the removal of namespaces from keywords.</p></article><article class="post"><h1 class="post-title"><a href="https://andersmurphy.com/2022/03/20/clojure-making-missing-environment-variables-fail-at-compile-time.html">Clojure: making missing environment variables fail at compile time</a></h1><time class="post-date" datetime="2022-03-20T00:00:00+00:00">20 Mar 2022</time><p>Have you ever deployed something to production only to have it break because of a missing environment variable? You can eliminate this risk with a simple macro.</p></article></div><div class="pagination"><div class="pagination-item"><a href="https://andersmurphy.com/page/2.html">-></a></div></div><div class="footer"><p>Â© 2015-2023 Anders Murphy</p></div></div></body></html>